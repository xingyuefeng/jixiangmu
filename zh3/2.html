<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>无刷新切换皮肤,刷新之后保存皮肤</title>
    <link  rel="stylesheet" href="../dist/css/bootstrap.css">
    <link  id="link" rel="stylesheet" href="css/blue.css">
    <style>
        .box {
            width: 500px;
            margin: 100px auto;
            text-align: center;
        }
        button {
            width: 100px;
            margin-left: 50px;
        }
    </style>
</head>
<body>
<div class="box">
<button type="button" color="blue" class="btn btn-primary">蓝</button>
<button type="button" color="green" class="btn btn-success">绿</button>
<button type="button" color="yellow" class="btn btn-warning">黄</button>
</div>
</body>
</html>
<script>
    window.onload=function(){
        var btn=document.getElementsByTagName('button');
        var link=document.getElementById("link");
        for(var i=0;i<btn.length;i++){
            btn[i].onclick=function(){
                var color=this.getAttribute("color");
                var css=link.getAttribute("href");
                var newcss=css.replace(/(blue)|(yellow)|(green)/,color);
                link.setAttribute("href",newcss);
                addCookie("color",color,1);
                console.log(document.cookie);
            }
        }
        var style=link.getAttribute("href");
        var origin_color=getCookie("color");
        var origin_css=style.replace(/(blue)|(yellow)|(green)/,origin_color);
        link.setAttribute("href",origin_css);
        function addCookie(name,value,expiresHours){
            var cookieString=name+"="+escape(value);
            //判断是否设置过期时间
            if(expiresHours>0){
                var date=new Date();
                date.setTime(date.getTime+expiresHours*3600*1000);
                cookieString=cookieString+"; expires="+date.toGMTString();
            }
            document.cookie=cookieString;
        }
        function getCookie(name){
            var strCookie=document.cookie;
            var arrCookie=strCookie.split("; ");
            for(var i=0;i<arrCookie.length;i++){
                var arr=arrCookie[i].split("=");
                if(arr[0]==name)return arr[1];
            }
            return "";
        }
    }
</script>